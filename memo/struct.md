# 構造体・`Debug`/`Display` トレイト・`derive` マクロ

## 2026-02-16

### impl メソッドの `self` の受け取り方は3種類

- `&self`（= `self: &Self`）: 借用。読み取り専用。呼び出し後も値を使える。最も一般的
- `&mut self`（= `self: &mut Self`）: 可変借用。フィールドを変更できる。呼び出し後も値を使える
- `self`（= `self: Self`）: ムーブ。所有権がメソッドに移動し、呼び出し後は元の変数が使えなくなる
- `self`（ムーブ）は型変換パターン（例: `builder.build()`）で使われる

### 自動参照・参照外し（C/C++ の `->` 演算子が不要な理由）

- `object.method()` と書くと、コンパイラがメソッドのシグネチャに合わせて自動で `&` / `&mut` / `*` を付与する
- 例: メソッドが `&self` を要求 → `rect1.area()` は自動的に `(&rect1).area()` として扱われる
- C/C++ では呼び出す側が `.` か `->` かを選ぶ必要があるが、Rust では常に `.` だけで済む
